(function(){"use strict";function E(n,e){self.onmessage=async a=>{await e;const{name:r,args:i,transferableIndices:c}=a.data,o=[];let s;try{const t=n[r];if(typeof t!="function"){console.error(`${r} is not an exposed worker function`),self.close();return}const d=await t(...i);i.forEach((m,j)=>c.includes(j)&&o.push(m)),s={type:"success",result:d,transferables:o}}catch(t){const{message:d,name:m}=t;s={type:"error",error:{message:d,name:m}}}self.postMessage(s,o)}}function P(n){return(...e)=>{const a={type:"control",name:n,args:e};self.postMessage(a)}}function F(n,e){e=e||{};const{url:a,init:r}=e;return new Promise(i=>{self.Module={...e?.Module,async onRuntimeInitialized(){r&&await r(),i(null)},locateFile(c,o){return(a||o)+c}},importScripts((a||"")+n)})}function C(n,...e){const a=Module.FS[n](...e);if(n!=="mkdir")return a}const L=(n,e)=>e.some(a=>n instanceof a);let M,x;function O(){return M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A(){return x||(x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D=new WeakMap,y=new WeakMap,S=new WeakMap,l=new WeakMap,_=new WeakMap;function T(n){const e=new Promise((a,r)=>{const i=()=>{n.removeEventListener("success",c),n.removeEventListener("error",o)},c=()=>{a(p(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",c),n.addEventListener("error",o)});return e.then(a=>{a instanceof IDBCursor&&D.set(a,n)}).catch(()=>{}),_.set(e,n),e}function W(n){if(y.has(n))return;const e=new Promise((a,r)=>{const i=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",o),n.removeEventListener("abort",o)},c=()=>{a(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",c),n.addEventListener("error",o),n.addEventListener("abort",o)});y.set(n,e)}let f={get(n,e,a){if(n instanceof IDBTransaction){if(e==="done")return y.get(n);if(e==="objectStoreNames")return n.objectStoreNames||S.get(n);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return p(n[e])},set(n,e,a){return n[e]=a,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function V(n){f=n(f)}function N(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=n.call(v(this),e,...a);return S.set(r,e.sort?e.sort():[e]),p(r)}:A().includes(n)?function(...e){return n.apply(v(this),e),p(D.get(this))}:function(...e){return p(n.apply(v(this),e))}}function R(n){return typeof n=="function"?N(n):(n instanceof IDBTransaction&&W(n),L(n,O())?new Proxy(n,f):n)}function p(n){if(n instanceof IDBRequest)return T(n);if(l.has(n))return l.get(n);const e=R(n);return e!==n&&(l.set(n,e),_.set(e,n)),e}const v=n=>_.get(n);function H(n,e,{blocked:a,upgrade:r,blocking:i,terminated:c}={}){const o=indexedDB.open(n,e),s=p(o);return r&&o.addEventListener("upgradeneeded",t=>{r(p(o.result),t.oldVersion,t.newVersion,p(o.transaction),t)}),a&&o.addEventListener("blocked",t=>a(t.oldVersion,t.newVersion,t)),s.then(t=>{c&&t.addEventListener("close",()=>c()),i&&t.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),s}const K=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],g=new Map;function z(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(g.get(e))return g.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,i=U.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(i||K.includes(a)))return;const c=async function(o,...s){const t=this.transaction(o,i?"readwrite":"readonly");let d=t.store;return r&&(d=d.index(s.shift())),(await Promise.all([d[a](...s),i&&t.done]))[0]};return g.set(e,c),c}V(n=>({...n,get:(e,a,r)=>z(e,a)||n.get(e,a,r),has:(e,a)=>!!z(e,a)||n.has(e,a)}));const b="hash",h="content";class J{dbPromise;constructor(e){this.dbPromise=H(e,1,{upgrade(a){a.createObjectStore(b),a.createObjectStore(h)}})}async getDB(){return this.dbPromise.catch(()=>{})}async get(e,a,r){const i=await this.getDB();if(await i?.get(b,e)===a)return i.get(h,e);const o=await fetch(r);if(!o.ok)throw new Error(`Fail to download ${e}`);const s=await o.arrayBuffer();return await i?.put(h,s,e),await i?.put(b,a,e),s}async invalidate(){return(await this.getDB())?.clear(b)}}var X="\uB3C4\uD55C\uAE00",G="\uD55C\uAD00\uD654",Q="\u6719\u6708\u62FC\u97F3",Y="\u6719\u6708\u62FC\u97F3\xB7\u8BED\u53E5\u6D41",Z="\u7CA4\u8BED\u62FC\u97F3",nn="\u7CA4\u8BED\u62FC\u97F3\xB7IPA",en="\u81EA\u7136\u7801\u53CC\u62FC",an="\u667A\u80FDABC\u53CC\u62FC",rn="\u5C0F\u9E64\u53CC\u62FC",on="\u5FAE\u8F6F\u53CC\u62FC",cn="\u62FC\u97F3\u52A0\u52A0\u53CC\u62FC",tn="86\u4E94\u7B14",sn="86\u4E94\u7B14\xB7\u62FC\u97F3",dn="86\u4E94\u7B14\xB7\u7E41\u4F53",pn="\u8896\u73CD\u7B80\u62FC",mn="\u5730\u7403\u62FC\u97F3",bn="X-SAMPA",un="\u4E91\u9F99\u56FD\u9645\u97F3\u6807",yn="\u6CE8\u97F3",ln="\u6CE8\u97F3\xB7\u5FEB\u6253",_n="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E03\u6307\u7985",fn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u516B\u6307\u7985",vn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E5D\u6307\u7985",gn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u5341\u6307\u7985",hn="\u4E2D\u53E4\u5168\u62FC",$n="\u4E2D\u53E4\u4E09\u62FC",wn="\u4ED3\u9889\u4E94\u4EE3",jn="\u4ED3\u9889\u4E94\u4EE3\xB7\u5FEB\u6253",kn="\u4E94\u7B14\u753B",Mn="\u884C\u521730",xn="\u4E0A\u6D77\u5434\u8BED\xB7\u8001\u6D3E",Dn="\u4E0A\u6D77\u5434\u8BED\xB7\u65B0\u6D3E",Sn="\u82CF\u5DDE\u5434\u8BED",zn="\u6253\u5B57\u901F\u8BB0\u6CD5",In="\u5FEB\u901F\u4ED3\u9889",Bn="\u901F\u6210",qn={hangul:X,handarin:G,luna_pinyin:Q,luna_pinyin_fluency:Y,jyut6ping3:Z,jyut6ping3_ipa:nn,double_pinyin:en,double_pinyin_abc:an,double_pinyin_flypy:rn,double_pinyin_mspy:on,double_pinyin_pyjj:cn,wubi86:tn,wubi_pinyin:sn,wubi_trad:dn,pinyin_simp:pn,terra_pinyin:mn,ipa_xsampa:bn,ipa_yunlong:un,bopomofo:yn,bopomofo_express:ln,combo_pinyin:_n,combo_pinyin_8:fn,combo_pinyin_9:vn,combo_pinyin_10:gn,zyenpheng:hn,sampheng:$n,cangjie5:wn,cangjie5_express:jn,stroke:kn,array30:Mn,wugniu_lopha:xn,wugniu:Dn,soutzoe:Sn,stenotype:zn,scj6:In,quick5:Bn},En={},Pn={},Fn={},Cn={dict:"luna_pinyin"},Ln={dict:"luna_pinyin",prism:"luna_quanpin"},On={},An={dict:"jyut6ping3",prism:"jyut6ping3_ipa"},Tn={dict:"luna_pinyin",prism:"double_pinyin"},Wn={dict:"luna_pinyin",prism:"double_pinyin_abc"},Vn={dict:"luna_pinyin",prism:"double_pinyin_flypy"},Nn={dict:"luna_pinyin",prism:"double_pinyin_mspy"},Rn={dict:"luna_pinyin",prism:"double_pinyin_pyjj"},Hn={},Kn={dict:"wubi86",prism:"wubi_pinyin"},Un={dict:"wubi86",prism:"wubi_trad"},Jn={},Xn={},Gn={},Qn={},Yn={dict:"terra_pinyin",prism:"bopomofo"},Zn={dict:"terra_pinyin",prism:"bopomofo_express"},ne={dict:"luna_pinyin",prism:"combo_pinyin"},ee={dict:"luna_pinyin",prism:"combo_pinyin"},ae={dict:"luna_pinyin",prism:"combo_pinyin"},ie={dict:"luna_pinyin",prism:"combo_pinyin"},re={},oe={dict:"zyenpheng",prism:"sampheng"},ce={},te={dict:"cangjie5",prism:"cangjie5_express"},se={},de={},pe={},me={dict:"wugniu_lopha",prism:"wugniu"},be={},ue={dict:"luna_pinyin",prism:"stenotype"},ye={},le={},_e={hangul:En,handarin:Pn,luna_pinyin:Fn,luna_pinyin_fluency:Cn,luna_quanpin:Ln,jyut6ping3:On,jyut6ping3_ipa:An,double_pinyin:Tn,double_pinyin_abc:Wn,double_pinyin_flypy:Vn,double_pinyin_mspy:Nn,double_pinyin_pyjj:Rn,wubi86:Hn,wubi_pinyin:Kn,wubi_trad:Un,pinyin_simp:Jn,terra_pinyin:Xn,ipa_xsampa:Gn,ipa_yunlong:Qn,bopomofo:Yn,bopomofo_express:Zn,combo_pinyin:ne,combo_pinyin_8:ee,combo_pinyin_9:ae,combo_pinyin_10:ie,zyenpheng:re,sampheng:oe,cangjie5:ce,cangjie5_express:te,stroke:se,array30:de,wugniu_lopha:pe,wugniu:me,soutzoe:be,stenotype:ue,scj6:ye,quick5:le},fe="picado-tv/rime-hangul",ve="picado-tv/rime-handarin",ge="luna-pinyin",he="luna-pinyin",$e="luna-pinyin",we="cantonese",je="cantonese",ke="double-pinyin",Me="double-pinyin",xe="double-pinyin",De="double-pinyin",Se="double-pinyin",ze="wubi",Ie="wubi",Be="wubi",qe="pinyin-simp",Ee="terra-pinyin",Pe="ipa",Fe="ipa",Ce="bopomofo",Le="bopomofo",Oe="combo-pinyin",Ae="combo-pinyin",Te="combo-pinyin",We="combo-pinyin",Ve="middle-chinese",Ne="middle-chinese",Re="cangjie",He="cangjie",Ke="stroke",Ue="array",Je="wugniu",Xe="wugniu",Ge="soutzoe",Qe="stenotype",Ye="scj",Ze="quick",na={hangul:fe,handarin:ve,luna_pinyin:ge,luna_pinyin_fluency:he,luna_quanpin:$e,jyut6ping3:we,jyut6ping3_ipa:je,double_pinyin:ke,double_pinyin_abc:Me,double_pinyin_flypy:xe,double_pinyin_mspy:De,double_pinyin_pyjj:Se,wubi86:ze,wubi_pinyin:Ie,wubi_trad:Be,pinyin_simp:qe,terra_pinyin:Ee,ipa_xsampa:Pe,ipa_yunlong:Fe,bopomofo:Ce,bopomofo_express:Le,combo_pinyin:Oe,combo_pinyin_8:Ae,combo_pinyin_9:Te,combo_pinyin_10:We,zyenpheng:Ve,sampheng:Ne,cangjie5:Re,cangjie5_express:He,stroke:Ke,array30:Ue,wugniu_lopha:Je,wugniu:Xe,soutzoe:Ge,stenotype:Qe,scj6:Ye,quick5:Ze},ea=["handarin"],aa=["luna_pinyin"],ia=["stroke"],ra=["stroke"],oa=["luna_pinyin","stroke","cangjie5"],ca=["luna_pinyin","stroke","cangjie5"],ta=["luna_pinyin"],sa=["luna_pinyin"],da=["luna_pinyin"],pa=["luna_pinyin"],ma=["luna_pinyin"],ba=["pinyin_simp"],ua=["pinyin_simp"],ya=["pinyin_simp"],la=["stroke"],_a=["stroke"],fa=["terra_pinyin","stroke"],va=["terra_pinyin","stroke"],ga=["luna_pinyin"],ha=["luna_pinyin"],$a=["luna_pinyin"],wa=["luna_pinyin"],ja=["luna_pinyin"],ka=["luna_pinyin"],Ma=["luna_quanpin"],xa=["luna_quanpin"],Da=["luna_pinyin"],Sa=["luna_quanpin"],za=["luna_pinyin"],Ia=["luna_pinyin"],Ba=["luna_pinyin"],qa=["luna_pinyin"],Ea=["luna_quanpin"],Pa=["luna_quanpin"],Fa={hangul:ea,handarin:aa,luna_pinyin:ia,luna_pinyin_fluency:ra,jyut6ping3:oa,jyut6ping3_ipa:ca,double_pinyin:ta,double_pinyin_abc:sa,double_pinyin_flypy:da,double_pinyin_mspy:pa,double_pinyin_pyjj:ma,wubi86:ba,wubi_pinyin:ua,wubi_trad:ya,pinyin_simp:la,terra_pinyin:_a,bopomofo:fa,bopomofo_express:va,combo_pinyin:ga,combo_pinyin_8:ha,combo_pinyin_9:$a,combo_pinyin_10:wa,zyenpheng:ja,sampheng:ka,cangjie5:Ma,cangjie5_express:xa,stroke:Da,array30:Sa,wugniu_lopha:za,wugniu:Ia,soutzoe:Ba,stenotype:qa,scj6:Ea,quick5:Pa},Ca=[{name:"jyut6ping3.prism.bin",md5:"6b71a9e2f823ddd4e264a1237914d1a7"},{name:"jyut6ping3.reverse.bin",md5:"7e966b94835ad457d5f81a3338f32f3b"},{name:"jyut6ping3.schema.yaml",md5:"d0fc61e25feffc2526bb4e98e16bbde6"},{name:"jyut6ping3.table.bin",md5:"7691a71f0998565dc2354f41cc3eaa10"},{name:"jyut6ping3_ipa.prism.bin",md5:"7b70d7566b50325e2b10d617207e0d93"},{name:"jyut6ping3_ipa.schema.yaml",md5:"bc1fc01dbaeb836c2e5aa5017ecd8b94"}],La=[{name:"wubi86.prism.bin",md5:"e40fe2db3e26f1f9efb1ea0bde2a343d"},{name:"wubi86.reverse.bin",md5:"fd84814998dbcc3feecc117ee8835ee3"},{name:"wubi86.schema.yaml",md5:"4c66187568b199a1a50026a13e1dde4b"},{name:"wubi86.table.bin",md5:"5f9a629c8ed1b254ebe2897474e9d39b"},{name:"wubi_pinyin.prism.bin",md5:"67b7747db86930810dce46bf26f0d5e0"},{name:"wubi_pinyin.schema.yaml",md5:"4c04a659b6eb7371b3c2ec2607a19671"},{name:"wubi_trad.prism.bin",md5:"330f3f5e67cdc152368431d5707a8d60"},{name:"wubi_trad.schema.yaml",md5:"47aff1514de471d8937c1730944dca85"}],Oa=[{name:"ipa_xsampa.prism.bin",md5:"1f89f323b398e55b41a3d51292e153b4"},{name:"ipa_xsampa.reverse.bin",md5:"204c1a057beff33f33e4e6e2334d9388"},{name:"ipa_xsampa.schema.yaml",md5:"3de5dc8e1373f3445eb3eb6372757725"},{name:"ipa_xsampa.table.bin",md5:"2643f70120a14876bf358e77fae47def"},{name:"ipa_yunlong.prism.bin",md5:"e99012d354473ed9251fde4d664cf360"},{name:"ipa_yunlong.reverse.bin",md5:"bb4ede9eca7365defaa9631dacf2d0c6"},{name:"ipa_yunlong.schema.yaml",md5:"bca1844fbfc48f6141d419cb154cbc00"},{name:"ipa_yunlong.table.bin",md5:"ca7388b30a151620453ef1684408c34f"}],Aa=[{name:"bopomofo.prism.bin",md5:"234e19133234e3c3b096aec7d4cebc25"},{name:"bopomofo.schema.yaml",md5:"2c657fdc0c9ac5894f3e4244949f2ef4"},{name:"bopomofo_express.prism.bin",md5:"166c04c549fe673e7b073b93c84832b0"},{name:"bopomofo_express.schema.yaml",md5:"d15617e84bc8cb6d001dba90c8bf5cfb"}],Ta=[{name:"cangjie5.prism.bin",md5:"270dae5bd46881ca495b8f96a3f405a8"},{name:"cangjie5.reverse.bin",md5:"1cec526731a457fbd930048a6bb3c4a5"},{name:"cangjie5.schema.yaml",md5:"fa91cc2e81a964b9a5099dcd1e234943"},{name:"cangjie5.table.bin",md5:"27532455e5194bc2da9a4eeecf3cb9d8"},{name:"cangjie5_express.prism.bin",md5:"332ba669b6f89ad261950859f8b9254c"},{name:"cangjie5_express.schema.yaml",md5:"8777c77fe530913bb23321a0534b66ec"}],Wa=[{name:"stroke.prism.bin",md5:"91b8ef81bd02d409057a18a0d62b2e3e"},{name:"stroke.reverse.bin",md5:"5eca5ef2a34f55c8589f34e7a3762a9d"},{name:"stroke.schema.yaml",md5:"44e4e9b9b7560c88374b6227816567d4"},{name:"stroke.table.bin",md5:"1ceec88e2abf0920c5e6d9ba32907dc0"}],Va=[{name:"array30.prism.bin",md5:"0e97da41ec8391c54d19f11071058393"},{name:"array30.reverse.bin",md5:"7f7d287012202461fc5ceb3f9eca2116"},{name:"array30.schema.yaml",md5:"7afec43f8ea020d44cbadc9bdefe2562"},{name:"array30.table.bin",md5:"e6dde610a837ae475807936ae77270d0"}],Na=[{name:"wugniu.prism.bin",md5:"dbf5abf3515c2fba8a0af549ae9e6061"},{name:"wugniu.schema.yaml",md5:"ee539505db7b3e4503a3a0f4cae62617"},{name:"wugniu_lopha.prism.bin",md5:"f3f5258eafc62e9cd05d697a29dd0e77"},{name:"wugniu_lopha.reverse.bin",md5:"3cd2200a259a83b80fcb356682174ce1"},{name:"wugniu_lopha.schema.yaml",md5:"f548d1bc05160aca287f455e1c94d338"},{name:"wugniu_lopha.table.bin",md5:"89ebfd89994a67472b2378f488338a76"}],Ra=[{name:"soutzoe.prism.bin",md5:"4af9c71a9e69294ca4dab79a4eafcefa"},{name:"soutzoe.reverse.bin",md5:"db12cdab4004bf6efa49542152fb7cfe"},{name:"soutzoe.schema.yaml",md5:"40f575d07cf52d64c1a15c5a58f255a7"},{name:"soutzoe.table.bin",md5:"6239f14f75ec3cbb0d913b6947f8e8c0"}],Ha=[{name:"stenotype.prism.bin",md5:"1df2aa4b1d705d88004246ce33f9b0bb"},{name:"stenotype.schema.yaml",md5:"0a6f54723a56922d7c73aa8fb654ee05"}],Ka=[{name:"scj6.prism.bin",md5:"bd95bef1a1cd46f289c7750337072373"},{name:"scj6.reverse.bin",md5:"efb9d5051b2ce3e4d91a4a8dc4b63027"},{name:"scj6.schema.yaml",md5:"ec5610abdd580e2699f51aa9c36aa8bc"},{name:"scj6.table.bin",md5:"4216472d63de2550ee944ac5e97c557a"}],Ua=[{name:"quick5.prism.bin",md5:"3bde0fa40d486200ce17c45574575cca"},{name:"quick5.reverse.bin",md5:"27444b0d2825ee331e992058d419be34"},{name:"quick5.schema.yaml",md5:"d1fa5bb2d31c5e4130df680aee8c4d0c"},{name:"quick5.table.bin",md5:"25954fec90c31dedb99a45812c7447a9"}],Ja={"picado-tv/rime-hangul":[{name:"hangul.prism.bin",md5:"8ce447cb78a10704835b542a817b0575"},{name:"hangul.reverse.bin",md5:"89c1a38fc0a1f6225184909316f12260"},{name:"hangul.schema.yaml",md5:"a2baf70990610d719342027edc463963"},{name:"hangul.table.bin",md5:"c22cfc8abdc153450c78cf6439860dc2"}],"picado-tv/rime-handarin":[{name:"handarin.prism.bin",md5:"5065348594b55da8b657669155805a11"},{name:"handarin.reverse.bin",md5:"0e225e3a3eb7ddbbdffa8691e0400d34"},{name:"handarin.schema.yaml",md5:"0f05b562d1967b6483f5eb48b0819c1e"},{name:"handarin.table.bin",md5:"af80d3497431856450e999e0b51120ed"}],"luna-pinyin":[{name:"luna_pinyin.prism.bin",md5:"353c5e34c859a9a0e76900df030fa713"},{name:"luna_pinyin.reverse.bin",md5:"d16701cc9cc16ab74f3b60b336409bf1"},{name:"luna_pinyin.schema.yaml",md5:"e9b840d9205f8425a98bd05122ba0fb9"},{name:"luna_pinyin.table.bin",md5:"153ea95bab6e4ee20abff0f5dfec6ead"},{name:"luna_pinyin_fluency.schema.yaml",md5:"2be9abb3c612c1479a7e2712b5b5cd39"},{name:"luna_quanpin.prism.bin",md5:"de0b1974ded4038dc2bea8e4c4e912d2"},{name:"luna_quanpin.schema.yaml",md5:"217dcb807feff1c3a11e664c05f8ac62"}],cantonese:Ca,"double-pinyin":[{name:"double_pinyin.prism.bin",md5:"ebe88ee6e183f57f385b26f407508b2d"},{name:"double_pinyin.schema.yaml",md5:"37d4bbe21afc6ecbffef32035853a62f"},{name:"double_pinyin_abc.prism.bin",md5:"6a9b3f79d7c8b0caaf32aa649c02b65d"},{name:"double_pinyin_abc.schema.yaml",md5:"c19a099692bfff3d2292f31cae94f1f3"},{name:"double_pinyin_flypy.prism.bin",md5:"f9f5a25e674bcd94999947baa0ea7212"},{name:"double_pinyin_flypy.schema.yaml",md5:"20da2434e8413cfee9a16862b5de94e7"},{name:"double_pinyin_mspy.prism.bin",md5:"0d0e95e701e381b790d91bea3d9c26cd"},{name:"double_pinyin_mspy.schema.yaml",md5:"da893bb1ccb222953447bc03e28a7aa3"},{name:"double_pinyin_pyjj.prism.bin",md5:"869d45bd575161358073112c6e220dd6"},{name:"double_pinyin_pyjj.schema.yaml",md5:"fa420f3c963b79af67c8c52c27cbffc2"}],wubi:La,"pinyin-simp":[{name:"pinyin_simp.prism.bin",md5:"3b1037493ae93c1f7ae64bea9bc16650"},{name:"pinyin_simp.reverse.bin",md5:"a7691b570c4c4a1a8ca6339f9b6338e8"},{name:"pinyin_simp.schema.yaml",md5:"7101abebdd3155a77b545ed7a19b3681"},{name:"pinyin_simp.table.bin",md5:"18cdf4674c35c6694f96ab10df5ee7be"}],"terra-pinyin":[{name:"terra_pinyin.prism.bin",md5:"ab694f25ee6ee00f010de4d9a5df7245"},{name:"terra_pinyin.reverse.bin",md5:"c2b4ebbd44eb9a57aa1f6e263001e83c"},{name:"terra_pinyin.schema.yaml",md5:"e1d2aabdde916f7bb782d4e924b529c7"},{name:"terra_pinyin.table.bin",md5:"aac5fdf8846b9eac8dc031fd6f8f1bdf"}],ipa:Oa,bopomofo:Aa,"combo-pinyin":[{name:"combo_pinyin.prism.bin",md5:"c6d468e4b7f88a824e32602624205ec1"},{name:"combo_pinyin.schema.yaml",md5:"1b0f5fc4b8270db662ce882b4ed96a2d"},{name:"combo_pinyin_10.schema.yaml",md5:"94fed0d8c33755f12ba9ec97cc41da35"},{name:"combo_pinyin_8.schema.yaml",md5:"ebd27fb7db368986561c54ad429dd56d"},{name:"combo_pinyin_9.schema.yaml",md5:"e5fc98fcf97bd2d2461d0e5969a8c535"}],"middle-chinese":[{name:"sampheng.prism.bin",md5:"edccb12d4111233c6c02cccd989c195b"},{name:"sampheng.schema.yaml",md5:"47d5a80503aac65038f641958672829b"},{name:"zyenpheng.prism.bin",md5:"7ad3323279ae37dbdaf2dd4b804b8618"},{name:"zyenpheng.reverse.bin",md5:"0d3b84ce7e7b2714cb4a0eea35536d38"},{name:"zyenpheng.schema.yaml",md5:"e7c18923cb4e305362f0b7ae48b2c329"},{name:"zyenpheng.table.bin",md5:"dc2e6122b5e0753e6c12887d21c38195"}],cangjie:Ta,stroke:Wa,array:Va,wugniu:Na,soutzoe:Ra,stenotype:Ha,scj:Ka,quick:Ua};const $="/rime",Xa="/usr/share/rime-data";function Ga(n,e){return`ime/${n}/${e}`}const Qa=new J("ime");async function Ya(n){const e=[];function a(i){if(e.includes(i))return[];e.push(i);const c=[];for(const k of Fa[i]||[])c.push(...a(k));const{dict:o,prism:s}=_e[i],t=o||i,d=`${t}.table.bin`,m=`${t}.reverse.bin`,j=`${s||t}.prism.bin`,ii=`${i}.schema.yaml`,B=na[i];for(const k of[d,m,j,ii])for(const{name:q,md5:ri}of Ja[B])if(k===q){c.push({name:q,md5:ri,target:B});break}return c}const r=a(n);await Promise.all(r.map(async({name:i,target:c,md5:o})=>{const s=`${Xa}/build/${i}`;try{Module.FS.lookupPath(s)}catch{const t=await Qa.get(i,o,Ga(c,i));Module.FS.writeFile(s,new Uint8Array(t))}}))}async function Za(n){return w||await Ya(n),Module.ccall("set_ime","null",["string"],[n]),u("write")}function u(n){let e,a;const r=new Promise((i,c)=>{e=i,a=c});return Module.FS.syncfs(n==="read",i=>{i&&a(i),e(null)}),r}const ni=F("rime.js",{url:"",async init(){Module.FS.mkdir($),Module.FS.mount(IDBFS,{},$),await u("read"),Module.ccall("init","null",[],[]);for(const[n,e]of Object.entries(qn))Module.ccall("set_schema_name","null",["string","string"],[n,e])},Module:{printErr(n){const e=n.match(/[EWID]\S+ \S+ \S+ (.*)/);e?{E:console.error,W:console.warn,I:console.info,D:console.debug}[n[0]](e[1]):console.error(n)}}});let w=!1;const ei=P("deployStatus");globalThis._deployStatus=(n,e)=>{n==="success"&&(w=!0),ei(n,e)};function I(n){for(const e of Module.FS.readdir(n)){if(e==="."||e==="..")continue;const a=`${n}/${e}`,{mode:r}=Module.FS.lstat(a);Module.FS.isDir(r)?(I(a),Module.FS.rmdir(a)):Module.FS.unlink(a)}}async function ai(){I($),await u("write"),w=!1,Module.ccall("reset","null",[],[])}E({fsOperate:C,resetUserDirectory:ai,setIME:Za,setOption(n,e){return Module.ccall("set_option","null",["string","number"],[n,e])},setPageSize(n){return Module.ccall("set_page_size","null",["number"],[n])},deploy(){return Module.ccall("deploy","null",[],[])},async process(n){const e=JSON.parse(Module.ccall("process","string",["string"],[n]));return"committed"in e&&await u("write"),e},selectCandidateOnCurrentPage(n){return Module.ccall("select_candidate_on_current_page","string",["number"],[n])}},ni)})();
